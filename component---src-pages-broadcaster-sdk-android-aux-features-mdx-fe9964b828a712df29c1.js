"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([[9188],{83052:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return p}});var a=n(63366),i=(n(67294),n(64983)),o=n(55602),r=["components"],l={},s={_frontmatter:l},c=o.Z;function p(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)(c,Object.assign({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",null,"Authentication"),(0,i.kt)("p",null,"IBM Video Streaming SDK provides a secure way to authenticate users with IBM ID or legacy Ustream account and getting access for IBM Channel API features for example listing or broadcasting. ",(0,i.kt)("inlineCode",{parentName:"p"},"OAuthAuthenticator")," wraps up ",(0,i.kt)("a",{parentName:"p",href:"https://ibm.github.io/video-streaming-developer-docs/api-basics-authentication"},"IBM Video Streaming Channel APIs Authentication flow")," and implements a basic authentication service that presents the IBM Video Streaming authentication site in an embedded ",(0,i.kt)("inlineCode",{parentName:"p"},"CustomTab")," on Android."),(0,i.kt)("p",null,"To use the authenticator obtain the necessary configuration parameters from you Channel API credentials using the Dashboard’s ",(0,i.kt)("a",{parentName:"p",href:"https://video.ibm.com/dashboard/integrations/api-access"},"API/SDK access")," page."),(0,i.kt)("p",null,"Current authentication flow:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Set up the authentication client by creating a new ",(0,i.kt)("inlineCode",{parentName:"li"},"OAuthAuthenticator")," instance. You will need to supply the following parameters: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savedInstanceState")," of your Activity or Fragment, so the client can persist its state"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"clientConfiguration")," that contains the ",(0,i.kt)("inlineCode",{parentName:"li"},"redirectUrl")," which will be used by the backend service to call back to your application once login is finished and your ",(0,i.kt)("inlineCode",{parentName:"li"},"clientId")," that identifies the current API using application"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"errorHandler")," which will notify you about possible errors occurring during authentication"))),(0,i.kt)("li",{parentName:"ol"},"Check whether you need to start the authentication process based on the Activity’s current ",(0,i.kt)("inlineCode",{parentName:"li"},"Intent")," parameter using ",(0,i.kt)("inlineCode",{parentName:"li"},"authenticator.shouldStartAuthentication(intent)")),(0,i.kt)("li",{parentName:"ol"},"Start the authentication process (if needed) using: ",(0,i.kt)("inlineCode",{parentName:"li"},"authenticator.startAuthentication(applicationContext)"),". It is important to supply ",(0,i.kt)("em",{parentName:"li"},"Application Context")," so your Activity can be destroyed and recreated during a configuration change"),(0,i.kt)("li",{parentName:"ol"},"When your activity is changing configuration or going into the background let the Authenticator save its state by calling ",(0,i.kt)("inlineCode",{parentName:"li"},"authenticator.onSaveInstanceState(outState)")," in your Activity’s / Fragment’s ",(0,i.kt)("inlineCode",{parentName:"li"},"onSaveInstanceState(outState: Bundle?)")," method"),(0,i.kt)("li",{parentName:"ol"},"In your ",(0,i.kt)("inlineCode",{parentName:"li"},"AndroidManifest.xml")," listen to the ",(0,i.kt)("inlineCode",{parentName:"li"},"redirectUrl")," (a.k.a callback url) using an intent filter. This way when the login is complete the browser can open the application and the authentication can be completed. See the sample app for details"),(0,i.kt)("li",{parentName:"ol"},"When the Activity receives the new ",(0,i.kt)("inlineCode",{parentName:"li"},"Intent")," after a successful authentication, you can request an Access Token from it by calling ",(0,i.kt)("inlineCode",{parentName:"li"},"authenticator.parseIntentForAccessToken(intent, tokenAvailableLambda)"),". The result lambda can be called from a worker thread, so please make sure to post the result to the Main Thread"),(0,i.kt)("li",{parentName:"ol"},"When the above described ",(0,i.kt)("inlineCode",{parentName:"li"},"tokenAvailableLambda")," is called it will return you a ",(0,i.kt)("inlineCode",{parentName:"li"},"TokenContainer")," object that will be used to access the IBM Channel API services. The ",(0,i.kt)("inlineCode",{parentName:"li"},"TokenContainer")," holds the following:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"accessToken"),": the token with which the Channel API can be used"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"expiresAt"),": an expiration date in Unix Epoch timestamp"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"refreshToken"),": that can be used to refresh the Access Token when it has passed its expiration date"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"idToken"),": contains information related to authenticity checking of tokens"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"subject"),": either the email address of the logged in user or the user name (in case of a legacy Ustream account)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"userType"),": this is a legacy feature. Describes the type of the logged in account. Distinguishes between SSO (value: ",(0,i.kt)("inlineCode",{parentName:"li"},"external"),") and legacy user logins (value: ",(0,i.kt)("inlineCode",{parentName:"li"},"simple"),")")))),(0,i.kt)("p",null,"For more details see the sample app or visit ",(0,i.kt)("a",{parentName:"p",href:"https://ibm.github.io/video-streaming-developer-docs/channel-api-basic-channel-management"},"IBM Video Streaming Channel API")," page for more information about Channel API usage."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-broadcaster-sdk-android-aux-features-mdx-fe9964b828a712df29c1.js.map